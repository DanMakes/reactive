{"ast":null,"code":"var _jsxFileName = \"/Users/artem/Applications/Weather_forecast/src/Days.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport './Days.css';\nimport Day from './Day';\nimport DayInDetails from './DayInDetails';\n\nclass Days extends Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.state = {\n      data: [{\n        date: \"Day_1\",\n        symbol: \"Symbol\",\n        temperature: 'Temp'\n      }, {\n        date: \"Day_2\",\n        symbol: \"Symbol\",\n        temperature: 'Temp'\n      }, {\n        date: \"Day_3\",\n        symbol: \"Symbol\",\n        temperature: 'Temp'\n      }, {\n        date: \"Day_4\",\n        symbol: \"Symbol\",\n        temperature: 'Temp'\n      }, {\n        date: \"Day_5\",\n        symbol: \"Symbol\",\n        temperature: 'Temp'\n      }],\n      detailedData: [{\n        date: \"Day\",\n        symbol: \"Symbol\",\n        temperature: 'Temp',\n        time: \"Time\"\n      }],\n      isDetailed: false,\n      // to show detailed information\n      fullWeather: '',\n      // save time and all data at once\n      city: '',\n      cityNotFound: 'False'\n    };\n  }\n\n  fetchWeather() {\n    var results = [];\n    var lat = '';\n    var lon = '';\n    var url = '';\n    var city = this.state.city;\n\n    let geo = require('./geo.json'); // import file with coordinates\n\n\n    console.log('Using your city: ' + this.state.city);\n    lat = geo[city][0];\n    lon = geo[city][1];\n    url = \"http://api.openweathermap.org/data/2.5/forecast?lat=\" + lat + \"&lon=\" + lon + \"&APPID=47246b58dee8b9eba96fa2308e7d54e2\";\n    axios(url).then(response => {\n      var result = response.data; // get 3 values from result\n\n      results = result.list.map(function (day) {\n        return {\n          date: formatDate(day.dt_txt),\n          symbol: formatIcon(day.weather[0].icon),\n          temperature: formatTemp(day.main.temp),\n          time: formatTime(day.dt_txt)\n        };\n      });\n      this.setState({\n        fullWeather: results\n      }); // save detailed results\n\n      function formatDate(date) {\n        // return month and day\n        return date.slice(8, 10) + '.' + date.slice(5, 7);\n      }\n\n      function formatIcon(icon) {\n        // return icon image\n        var icon_url = 'http://openweathermap.org/img/w/';\n        return icon_url + icon + '.png';\n      }\n\n      function formatTemp(temp) {\n        // return celcium results\n        return (temp - 273.15).toFixed(1) + ' C';\n      }\n\n      function formatTime(date) {\n        // return time\n        return date.slice(11, 16);\n      } // write received values to state\n\n\n      var five_results = [];\n\n      for (var i = 0; i < results.length; i += 8) {\n        // return 5 results\n        five_results.push(results[i]);\n      }\n\n      this.setState({\n        data: five_results\n      });\n    }).catch(err => console.log(err));\n  }\n\n  componentDidMount() {\n    var weatherContainer = ReactDOM.findDOMNode(this.refs.weather);\n    var cityNotFoundContainer = ReactDOM.findDOMNode(this.refs.cityNotFound);\n\n    if (this.state.city === '') {\n      weatherContainer.style.visibility = 'hidden';\n      cityNotFoundContainer.style.visibility = \"hidden\";\n    } else {\n      weatherContainer.style.visibility = 'visible';\n    }\n\n    var city = this.state.city;\n\n    let geo = require('./geo.json');\n\n    if (city in geo) {\n      this.fetchWeather();\n      this.interval = setInterval(() => this.fetchWeather(), 60 * 10000);\n    } else {\n      cityNotFoundContainer.innerHTML = \"NF1\";\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // Typical usage (don't forget to compare props):\n    var weatherContainer = ReactDOM.findDOMNode(this.refs.weather);\n    var cityNotFoundContainer = ReactDOM.findDOMNode(this.refs.city);\n\n    if (this.state.city !== prevState.city) {\n      var city = this.state.city;\n\n      let geo = require('./geo.json');\n\n      if (city in geo) {\n        console.log(this.state.city, prevState.city);\n        weatherContainer.style.visibility = 'visible';\n        this.fetchWeather();\n      } else {\n        weatherContainer.style.visibility = 'hidden';\n        cityNotFoundContainer.innerHTML = \"NF2\";\n      }\n    }\n  }\n\n  onDayClick(date) {\n    var resultsDetailed = this.state.fullWeather.filter(function (day) {\n      return day.date === date; // return forecast for clicked day\n    });\n    this.setState({\n      detailedData: resultsDetailed,\n      isDetailed: true\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault(); // Find the text field via the React ref\n\n    const text = ReactDOM.findDOMNode(this.refs.textInput).value.trim();\n    this.setState({\n      city: text\n    }, function () {\n      console.log(this.state.city);\n    }); // Clear form\n\n    ReactDOM.findDOMNode(this.refs.textInput).value = '';\n  }\n\n  render() {\n    var days = this.state.data.map(day => React.createElement(Day, {\n      data: day,\n      key: day.date,\n      onClick: () => this.onDayClick(day.date),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }));\n\n    if (this.state.isDetailed) {\n      var detailedDays = this.state.detailedData.map(dayData => React.createElement(DayInDetails, {\n        data: dayData,\n        key: dayData.time,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }));\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"city-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"city\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      ref: \"textInput\",\n      placeholder: \"Type your city and press enter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"cityNotFound\",\n      ref: \"cityNotFound\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"Weather-container\",\n      ref: \"weather\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"city-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, this.state.city), React.createElement(\"ul\", {\n      className: \"Weather-days\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, days), React.createElement(\"ul\", {\n      className: \"Weather-hours\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, this.state.isDetailed ? detailedDays : false)));\n  }\n\n}\n\nexport default Days;","map":{"version":3,"sources":["/Users/artem/Applications/Weather_forecast/src/Days.js"],"names":["React","Component","ReactDOM","BrowserRouter","Router","Route","Link","axios","Day","DayInDetails","Days","constructor","props","handleSubmit","bind","state","data","date","symbol","temperature","detailedData","time","isDetailed","fullWeather","city","cityNotFound","fetchWeather","results","lat","lon","url","geo","require","console","log","then","response","result","list","map","day","formatDate","dt_txt","formatIcon","weather","icon","formatTemp","main","temp","formatTime","setState","slice","icon_url","toFixed","five_results","i","length","push","catch","err","componentDidMount","weatherContainer","findDOMNode","refs","cityNotFoundContainer","style","visibility","interval","setInterval","innerHTML","componentDidUpdate","prevProps","prevState","onDayClick","resultsDetailed","filter","event","preventDefault","text","textInput","value","trim","render","days","detailedDays","dayData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport './Days.css';\nimport Day from './Day';\nimport DayInDetails from './DayInDetails'\n\nclass Days extends Component {\n  constructor(props) {\n            super(props);\n            this.handleSubmit = this.handleSubmit.bind(this);\n            this.state = {\n                data: [{\n                        date: \"Day_1\",\n                        symbol: \"Symbol\",\n                        temperature: 'Temp',\n                },\n                  {\n                        date: \"Day_2\",\n                        symbol: \"Symbol\",\n                        temperature: 'Temp',\n                },\n                {\n                        date: \"Day_3\",\n                        symbol: \"Symbol\",\n                        temperature: 'Temp',\n                },\n                {\n                        date: \"Day_4\",\n                        symbol: \"Symbol\",\n                        temperature: 'Temp',\n                },\n                {\n                        date: \"Day_5\",\n                        symbol: \"Symbol\",\n                        temperature: 'Temp',\n                },\n                ],\n                detailedData: [{\n                    date: \"Day\",\n                    symbol: \"Symbol\",\n                    temperature: 'Temp',\n                    time: \"Time\",\n                },\n                ],\n                isDetailed: false, // to show detailed information\n                fullWeather: '',  // save time and all data at once\n                city: '',\n                cityNotFound: 'False',\n            };\n        }\n\n   fetchWeather() {\n        var results = [];\n        var lat = '';\n        var lon = '';\n        var url = '';\n        var city = this.state.city;\n        let geo = require('./geo.json');  // import file with coordinates\n        console.log('Using your city: ' + this.state.city);\n        lat = geo[city][0];\n        lon = geo[city][1];\n        url = \"http://api.openweathermap.org/data/2.5/forecast?lat=\" + lat + \"&lon=\" + lon + \"&APPID=47246b58dee8b9eba96fa2308e7d54e2\";\n        axios(url)\n        .then((response) => { \n                var result = response.data;\n                // get 3 values from result\n                results = result.list.map(function(day){\n                        return {date: formatDate(day.dt_txt),\n                                symbol: formatIcon(day.weather[0].icon),\n                                temperature: formatTemp(day.main.temp),\n                                time: formatTime(day.dt_txt),\n                                }\n                    });\n                this.setState({fullWeather: results})  // save detailed results\n                function formatDate(date){\n                        // return month and day\n                        return date.slice(8, 10) + '.' + date.slice(5, 7);\n                }\n\n                function formatIcon(icon){\n                     // return icon image\n                    var icon_url = 'http://openweathermap.org/img/w/';\n                    return icon_url + icon + '.png'\n                }\n\n                function formatTemp(temp){\n                     // return celcium results\n                    return (temp - 273.15).toFixed(1) + ' C';\n                }\n\n                function formatTime(date){\n                    // return time\n                    return date.slice(11, 16);\n                }\n\n                // write received values to state\n                var five_results = []\n                for (var i = 0; i < results.length; i += 8){  // return 5 results\n                    five_results.push(results[i]);\n                }\n                this.setState({data: five_results})\n            })\n            .catch(err => console.log(err));\n    };\n\n    componentDidMount() {\n        var weatherContainer = ReactDOM.findDOMNode(this.refs.weather);\n        var cityNotFoundContainer = ReactDOM.findDOMNode(this.refs.cityNotFound);\n        if (this.state.city === ''){\n            weatherContainer.style.visibility='hidden';\n            cityNotFoundContainer.style.visibility = \"hidden\";\n        }\n        else {\n            weatherContainer.style.visibility='visible';\n        }\n        var city = this.state.city;\n        let geo = require('./geo.json'); \n        if (city in geo){\n        this.fetchWeather();\n        this.interval = setInterval(() => this.fetchWeather(), 60 * 10000);\n        }\n        else{\n            cityNotFoundContainer.innerHTML = \"NF1\";\n        }\n    };\n\n    componentDidUpdate(prevProps, prevState) {\n   // Typical usage (don't forget to compare props):\n   var weatherContainer = ReactDOM.findDOMNode(this.refs.weather);\n   var cityNotFoundContainer = ReactDOM.findDOMNode(this.refs.city);\n    if (this.state.city !== prevState.city) {\n        var city = this.state.city;\n        let geo = require('./geo.json'); \n        if (city in geo){\n    console.log(this.state.city, prevState.city);\n    weatherContainer.style.visibility='visible';\n    this.fetchWeather();\n    }\n     else{\n        weatherContainer.style.visibility = 'hidden';\n        cityNotFoundContainer.innerHTML = \"NF2\";\n    }\n}\n}\n\n    onDayClick(date) {\n      var resultsDetailed = this.state.fullWeather.filter(function(day){\n                        return day.date === date;   // return forecast for clicked day\n                    });\n      this.setState({detailedData: resultsDetailed, isDetailed: true});\n    };\n\n    handleSubmit(event) {\n    event.preventDefault();\n    // Find the text field via the React ref\n    const text = ReactDOM.findDOMNode(this.refs.textInput).value.trim();        \n    this.setState({city: text}, function () {\n    console.log(this.state.city);});\n    // Clear form\n    ReactDOM.findDOMNode(this.refs.textInput).value = '';\n  }\n\n   render() {\n   var days = this.state.data.map((day) => \n        <Day data={day} key={day.date} onClick={() => this.onDayClick(day.date)}/>\n            );\n   if (this.state.isDetailed){\n   var detailedDays = this.state.detailedData.map((dayData) => \n        <DayInDetails data={dayData} key={dayData.time} />\n            );\n    }\n  return (\n    <div className=\"container\">\n    <div className=\"city-input\">\n    <form className=\"city\" onSubmit={this.handleSubmit} >\n              <input\n                type=\"text\"\n                ref=\"textInput\"\n                placeholder=\"Type your city and press enter\"\n              />\n            </form> \n        </div>\n        <div className='cityNotFound' ref=\"cityNotFound\"></div>\n        <div className=\"Weather-container\" ref=\"weather\">\n        <div className=\"city-name\">{this.state.city}</div>   \n      <ul className=\"Weather-days\">{days}\n      </ul>\n       <ul className=\"Weather-hours\">{this.state.isDetailed ? detailedDays : false}\n      </ul>\n      </div>\n      </div>\n  );\n}\n}\n\nexport default Days;\n"]},"metadata":{},"sourceType":"module"}